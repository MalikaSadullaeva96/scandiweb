<?php
include_once "constants.php";

abstract class Product
{
    public $sku;

    public function __construct($sku)
    {
        $this->sku = $sku;
    }

    public function InsertData()
    {
        $extraAttributes = $this->GetExtraColumns();
        $columnNames = join(", ", array_keys($extraAttributes));
        $columnValues =  join(", ", array_values($extraAttributes));
        $query = "INSERT INTO " . PRODUCT_TABLE . "($this->sku, $columnNames) VALUES $columnValues)";
        var_dump($query);
    }

    abstract public function GetExtraColumns();
}

class DVD extends Product
{
    public $size;

    public function __construct($sku, $size)
    {
        parent::__construct($sku);
        $this->size = $size;
    }

    public function GetExtraColumns()
    {
        return [
            "size" => $this->size,
            "sellable" => 1
        ];
    }
}

class Book extends Product
{
    public $weight;

    public function __construct($sku, $weight)
    {
        parent::__construct($sku);
        $this->weight = $weight;
    }

    public function GetExtraColumns()
    {
        return [
            "weight" => $this->weight,
            "sellable" => 1
        ];
    }
}

class Furniture extends Product
{
    public $width;
    public $length;
    public $height;

    public function __construct($sku, $w, $l, $h)
    {
        parent::__construct($sku);
        $this->width = $w;
        $this->height = $h;
        $this->length = $l;
    }

    public function GetExtraColumns()
    {
        return [
            "length" => $this->length,
            "width" => $this->width,
            "height" => $this->height,
            "sellable" => 0
        ];
    }
}

function insertData(Product $product)
{
    $product->InsertData();
}

$dvd = new DVD(0, 1);
$book = new Book(1, 1);
$furniture = new Furniture(2, 200, 300, 400);

insertData($dvd);
insertData($book);
insertData($furniture);

?>